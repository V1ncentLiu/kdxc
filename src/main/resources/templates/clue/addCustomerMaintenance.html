<!DOCTYPE html>
<html>
<head th:include="_header_include::frag(~{::title},~{},~{})" >
    <title>客户维护</title>
    <meta charset="UTF-8">
    <style type="text/css">
        .paddingTB { padding: 4px 0px; }
        .paddingL55 { padding-left: 55px; }
        .el-form-item.lineInherit .el-form-item__content{ line-height: inherit!important; }
        @media screen and (width:1920px) {
            .paddingL55 .el-date-editor.el-input { width: 218px; }
            /*.paddingL55 div.el-form-item:nth-of-type(2) { width: 100px; }*/
            .paddingL55 div.el-form-item, .paddingL55 .el-input--mini .el-input__inner { width: 202px; }
            .paddingL55 div.el-form-item:last-child { width: 186px; text-align: center; }
        }
        @media screen and (width:1366px) {
            .paddingL55 { line-height: 28px; }
            .paddingL55 .el-date-editor.el-input { width: 145px; }
            /*.paddingL55 div.el-form-item:nth-of-type(2) { width: 100px; }*/
            .paddingL55 div.el-form-item, .paddingL55 .el-input--mini .el-input__inner { width: 133px; }
            .paddingL55 div.el-form-item:last-child { width: 106px; text-align: center; }
        }
        @media screen and (max-width:1365px) {
            .paddingL55 { line-height: 28px; }
            .paddingL55 .el-date-editor.el-input { width: 145px; }
            /*.paddingL55 div.el-form-item:nth-of-type(2) { width: 100px; }*/
            .paddingL55 div.el-form-item, .paddingL55 .el-input--mini .el-input__inner { width: 133px; }
            .paddingL55 div.el-form-item:last-child { width: 106px; text-align: center; }
        }
    </style>
</head>
<body>
<div id="addCustomer" class="addCustomer mainPadding" style="display: none;"> 
    <el-breadcrumb separator="/" class="elBreadcrumb marginB20">
        <el-breadcrumb-item>Home</el-breadcrumb-item>
        <el-breadcrumb-item>电销管理</el-breadcrumb-item>
        <el-breadcrumb-item>客户维护</el-breadcrumb-item>
    </el-breadcrumb> 
    
    <el-row class="borderbox">
        <div class="inforTitle">客户维护</div> 
        <el-form :model="form" :rules="rules" ref="form" class="padding20">
            <div class="marginB20 fs16 paddingT20">基本信息</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="客户姓名：" prop="customerName" :label-width="formLabelWidth">
                           <el-input v-model="form.customerName" autocomplete="off" maxLength="10"></el-input>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="手机号：" prop="customerPhone" :label-width="formLabelWidth">
                           <!-- <el-input v-model="form.customerPhone" autocomplete="off" style="width: 60%;" @keyup.native="number" maxlength="11"></el-input> -->
                           <!-- <span style="padding-left: 5px;color: rgb(0, 114, 255);cursor: pointer;" @click="dialogFormVisible = true">+手机号</span> -->
                           <el-button type="primary" @click="dialogFormVisible = true"><i class="el-icon-plus"></i>手机号<!-- 查看多个手机号 --></el-button>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="性别：" :label-width="formLabelWidth">
                           <el-select v-model="form.customerSex" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="微信：" :label-width="formLabelWidth">
                           <el-input v-model="form.ishasWx" autocomplete="off" style="width: 60%;"></el-input>
                           <span style="padding-left: 5px;color: rgb(0, 114, 255);cursor: pointer;" @click="dialogFormImg = true">查看二维码</span>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="餐饮经验：" :label-width="formLabelWidth">
                           <el-select v-model="form.experience" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="年龄：" :label-width="formLabelWidth">
                           <el-input v-model="form.customerAge" autocomplete="off"></el-input>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="职业：" :label-width="formLabelWidth">
                           <el-select v-model="form.customerJob" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="合伙人：" :label-width="formLabelWidth">
                           <el-select v-model="form.customerPartner" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="选址情况：" :label-width="formLabelWidth">
                           <el-select v-model="form.address" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="开店紧迫性：" :label-width="formLabelWidth">
                           <!-- <el-input v-model="form.urgency" autocomplete="off" style='width: 60%;'> -->
                            <el-date-picker
                                style='width: 60%;'
                                v-model="form.urgency"
                                type="month"
                                placeholder="选择月">
                            </el-date-picker>   
                            </el-input><span style="padding-left: 5px;">之前启动</span>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="客户级别：" :label-width="formLabelWidth">
                           <el-select v-model="form.customerLevel" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="QQ：" :label-width="formLabelWidth">
                           <el-input v-model="form.qq" autocomplete="off"></el-input>
                        </el-form-item>
                    </el-col>
                </el-row>
            </div>
            <div class="marginB20 fs16 paddingT20">投资意向信息</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="投资金额：" :label-width="formLabelWidth">
                           <el-select v-model="form.money" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="店面大小：" :label-width="formLabelWidth">
                           <el-select v-model="form.area" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="意向品类：" :label-width="formLabelWidth">
                           <el-select v-model="form.intentionCategory" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="16">
                        <el-form-item label="意向项目：" :label-width="formLabelWidth">
                            <el-radio v-model="radioProject" label="1">内部项目</el-radio>
                            <el-select v-model="form.insideProject" placeholder="请选择">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                            <el-radio v-model="radioProject" label="2">外部项目</el-radio>
                            <el-input v-model="form.outsideProject" autocomplete="off" style="width: 25%;"></el-input>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="24">
                        <el-form-item label="省：" :label-width="formLabelWidth" style="width: 33.3%;float: left;">
                           <el-select v-model="form.province" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="市：" :label-width="formLabelWidth" style="width: 33.3%;float: left;">
                           <el-select v-model="form.city" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="区县：" :label-width="formLabelWidth" style="width: 33.3%;float: left;">
                           <el-select v-model="form.district" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                </el-row>
            </div>
            <div class="marginB20 fs16 paddingT20">上传资料</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-col :span="16" >
                        <el-button size="small" type="danger" @click="deteleDialogTip">删除</el-button>
                        <el-button type="text" disabled>只允许上传图片／音频文件。</el-button>
                    </el-col>
                    <el-col :span="4" :offset="4" class="f-tar">
                        <el-upload
                          class="upload-demo"
                          action="https://jsonplaceholder.typicode.com/posts/"
                          :on-preview="handlePreview"
                          :on-remove="handleRemove"
                          :before-remove="beforeRemove"
                          :limit="1"
                          :on-exceed="handleExceed"
                          :file-list="fileList">
                          <el-button size="small" type="primary">点击上传</el-button>
                        </el-upload>
                    </el-col>
                </el-row>
                <el-row>
                    <el-table
                        ref="multipleTable"
                        :data="tableDataC1"
                        tooltip-effect="dark"
                        style="width: 100%"
                        border
                        @selection-change="handleSelectionChange"
                     >
                        <el-table-column
                          type="selection"
                          width="55"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="userName"
                          label="上传人姓名"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="data"
                          label="上传时间"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="fileName"
                          label="文件名称"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          label="操作"
                          align="center">
                          <template slot-scope="scope">
                              <el-button
                                  size="mini"
                                  type="text"
                                  @click="handleOperateFn(scope.$index, scope.row)"
                               >{{ scope.row.operate }}</el-button>
                          </template>
                        </el-table-column>
                        <el-table-column
                          prop="deleteStatus"
                          label="删除状态"
                          align="center">
                        </el-table-column>
                    </el-table>
                </el-row>
            </div>
            <div class="marginB20 fs16 paddingT20">跟进记录</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-col :span="16" class="paddingTB">
                        <el-button size="small" type="danger" @click="deteleDialogTip">删除</el-button>
                        <el-button size="small" type="info" @click="editRecord">编辑</el-button>
                    </el-col>
                    <el-col :span="4" :offset="4" class="f-tar">
                        <el-button size="small" type="primary" @click="lineFormShow=true">添加</el-button>
                        <!-- <el-button size="small" type="primary" @click="addRecord">添加</el-button> -->
                    </el-col>
                </el-row>
                <el-row>
                    <el-table
                        ref="multipleTable"
                        :data="tableDataC2"
                        tooltip-effect="dark"
                        style="width: 100%"
                        border
                        @selection-change="handleSelectionChange"
                     >
                        <el-table-column
                          type="selection"
                          width="55"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="dialingTime"
                          label="拨打时间"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="customerStatus"
                          label="客户状态"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="dialing"
                          label="是否接通"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="resourceAvailability"
                          label="资源有效性"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="customerfocus"
                          label="客户关注点"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="visited"
                          label="是否继续回访"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="visitedNextTime"
                          label="下次回访时间"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="creater"
                          label="创建人"
                          align="center">
                        </el-table-column>
                        <div slot="append" v-show="lineFormShow">
                          <el-form :inline="true" :model="formInline" class="demo-form-inline">
                            <el-row class="paddingL55">
                                  <el-date-picker
                                    v-model="dialingTime"
                                    type="datetime"
                                    size="mini"
                                    placeholder="选择日期时间">
                                  </el-date-picker>
                                  <el-form-item label="" size="mini">
                                    <el-select v-model="formInline.region" placeholder="客户状态">
                                      <el-option label="未建立联系" value="shanghai"></el-option>
                                      <el-option label="建立联系-无意向" value="beijing1"></el-option>
                                      <el-option label="建立联系-不可转化" value="beijing2"></el-option>
                                      <el-option label="建立联系-可转化" value="beijing3"></el-option>
                                      <el-option label="建立联系-可追踪" value="beijing4"></el-option>
                                      <el-option label="建立联系-可邀约" value="beijing5"></el-option>
                                      <el-option label="建立联系-邀约" value="beijing6"></el-option>
                                      <el-option label="建立联系-来访" value="beijing7"></el-option>
                                      <el-option label="建立联系-签约" value="beijing8"></el-option>
                                      <el-option label="建立联系-退款" value="beijing9"></el-option>
                                    </el-select>
                                  </el-form-item>
                                  <el-form-item label="" size="mini">
                                    <el-select v-model="formInline.region" placeholder="是否接通">
                                      <el-option label="是" value="shanghai"></el-option>
                                      <el-option label="否" value="beijing"></el-option>
                                    </el-select>
                                  </el-form-item>
                                  <el-form-item label="" size="mini">
                                    <el-select v-model="formInline.region" placeholder="无效资源">
                                      <el-option label="无效资源" value="shanghai"></el-option>
                                      <el-option label="有效资源" value="beijing"></el-option>
                                    </el-select>
                                  </el-form-item>
                                  <el-form-item label="" size="mini">
                                    <el-input v-model="formInline.user" size="mini" placeholder="客户关注点"></el-input>
                                  </el-form-item>
                                  <el-form-item label="" size="mini">
                                    <el-select v-model="formInline.region" placeholder="是否继续回访">
                                      <el-option label="区域一" value="shanghai"></el-option>
                                      <el-option label="区域二" value="beijing"></el-option>
                                    </el-select>
                                  </el-form-item>
                                  <el-date-picker
                                    v-model="dialingTime"
                                    type="datetime"
                                    format="yyyy-MM-dd HH:mm"
                                    size="mini"
                                    placeholder="选择日期时间">
                                  </el-date-picker>
                                  <el-form-item  class="lineInherit">
                                    <el-button type="primary" size="mini" @click="onConfirmAdd">确认添加</el-button>
                                  </el-form-item>
                            </el-row>
                          </el-form>
                        </div>
                    </el-table>
                </el-row>
            </div>
            <div class="marginB20 fs16 paddingT20">资源信息</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="资源类型：" :label-width="formLabelWidth">
                            <el-select v-model="form.resource" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="资源类别：" :label-width="formLabelWidth">
                            <el-select v-model="form.resourceType" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="广告位：" :label-width="formLabelWidth">
                            <el-select v-model="form.adPosition" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="媒介：" :label-width="formLabelWidth">
                            <el-select v-model="form.media" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="搜索词：" :label-width="formLabelWidth">
                           <el-input v-model="form.searchWord" autocomplete="off" maxlength="50"></el-input>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="资源项目：" :label-width="formLabelWidth">
                            <el-select v-model="form.project" placeholder="请选择" style="width: 100%;">
                                <el-option
                                    v-for="item in statusOptions"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="8">
                        <el-form-item label="留言时间：" :label-width="formLabelWidth">
                            <!-- <el-input v-model="form.feedbackTime" autocomplete="off"></el-input> -->
                            <el-date-picker
                                style="width: 100%;"
                                v-model="form.feedbackTime"
                                type="datetime"
                                placeholder="选择日期时间">
                            </el-date-picker>
                        </el-form-item>
                    </el-col>
                    <el-col :span="8">
                        <el-form-item label="留言重点：" :label-width="formLabelWidth">
                            <el-input v-model="form.feedbackPoint" autocomplete="off" maxLength="100"></el-input>
                        </el-form-item>
                    </el-col>
                </el-row>
            </div>
            <div class="marginB20 fs16 paddingT20">通话记录</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-table
                        ref="multipleTable"
                        :data="tableDataC3"
                        tooltip-effect="dark"
                        style="width: 100%"
                        border
                        @selection-change="handleSelectionChange"
                     >
                        <el-table-column
                          type="index"
                          width="55"
                          label="序号"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="name"
                          label="姓名"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="role"
                          label="角色"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="callType"
                          label="通话类型"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="callTime"
                          label="拨打时间"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="connectSituation"
                          label="接通情况"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="connectTime"
                          label="接通时长"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          label="操作"
                          align="center">
                          <template slot-scope="scope">
                            <el-button
                              size="mini"
                              type="primary"
                              icon="el-icon-caret-right"
                              @click="handlePlay(scope.$index, scope.row)"
                              ></el-button>
                            <el-button
                              size="mini"
                              type="primary"
                              icon="el-icon-download"
                              @click="handleDownload(scope.$index, scope.row)"
                              ></el-button>
                          </template>
                        </el-table-column>
                    </el-table>
                </el-row>
            </div>
            <div class="marginB20 fs16 paddingT20">流转人员</div>
            <div class="borderbox padding20">
                <el-row>
                    <el-table
                        ref="multipleTable"
                        :data="tableDataC4"
                        tooltip-effect="dark"
                        style="width: 100%"
                        border
                        @selection-change="handleSelectionChange"
                     >
                        <el-table-column
                          type="index"
                          width="55"
                          label="序号"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="serverRole"
                          label="服务人员角色"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="serverName"
                          label="服务人员姓名"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="allocatRule"
                          label="分配规则（名称）"
                          align="center">
                        </el-table-column>
                        <el-table-column
                          prop="serverTime"
                          label="服务时间"
                          align="center">
                        </el-table-column>
                    </el-table>
            </div>
            <div class="padding20 f-tac">            
                <el-button type="primary" @click="submitForm('form')">提交客户资源</el-button>
                <el-button type="primary" @click="inviteCustomer">邀约来访</el-button>
                <el-button>取 消</el-button>
            </div> 
        </el-form> 
    </el-row>

    <!-- dialog -->
    <el-dialog title="添加手机号" :visible.sync="dialogFormVisible">
        <el-form :model="dialogForm" :rules="dialogRules" ref="dialogForm">
            <el-form-item label="手机号2：" :label-width="formLabelWidth">
                <span>15111111111</span>
                <span><i class="el-icon-phone-outline" style="font-size: 20px;color: rgb(0, 114, 255);cursor: pointer;"></i></span>
            </el-form-item>
            <el-form-item label="手机号3：" prop="phoneNum" :label-width="formLabelWidth">
                <el-input v-model="dialogForm.phoneNum" autocomplete="off" style="width: 60%;"></el-input>
            </el-form-item>
        </el-form>
        <div slot="footer" class="f-tac">            
            <el-button type="primary" @click="submitDialogForm('dialogForm')">提 交</el-button>
            <el-button @click="dialogFormVisible = false">取 消</el-button>
        </div>
    </el-dialog> 
    <!-- dialog -->
    <el-dialog title="二维码" :visible.sync="dialogFormImg">
        <div class="padding20" style="text-align: center;">
            <img src="images/errorIcon.jpg" alt="" style="width: 250px;height: 250px;">
        </div>
    </el-dialog>    
</div>
</body>
<!-- import Vue before Element -->
 <div th:include="_footer_include :: #jsLib"></div>
<script th:inline="javascript" >
var clueId=[[${clueId}]];//线索ID
 var addCustomerVM=   new Vue({
        el: '#addCustomer',
        data: function() {
            return {       
                isDisabled:true,//默认不可点击         
                radioProject:'',
                dialogFormVisible: false,
                dialogFormImg:false,
                form: {                    
                    resource:'',
                    resourceType:'',
                    adPosition:'',
                    media:'',
                    searchWord:'',
                    project:'',
                    feedbackTime:'',
                    feedbackPoint:'',
                    customerName:'',
                    customerPhone:'',
                    customerSex:'',
                    ishasWx:'',
                    experience:'',
                    customerAge:'',
                    customerJob:'',
                    customerPartner:'',
                    address:'',
                    urgency:'',
                    customerLevel:'',
                    qq:'',
                    money:'',
                    area:'',
                    intentionCategory:'',
                    insideProject:'',
                    outsideProject:'',
                    province:'',
                    city:'',
                    district:''
                },
                formLabelWidth: '120px',
                rules:{
                    customerName: [
                        { required: true, message: '客户姓名不能为空', trigger: 'blur' }
                    ],
                    customerPhone: [
                        { required: true, message: '手机号不能为空', trigger: 'blur' },
                        { validator:function(rule,value,callback){                 
                            if(/^[0-9]*$/.test(value) == false){
                               callback(new Error("请输入数字"));
                            }else{
                               callback();
                            } 
                            callback();
                        }, trigger: 'blur'}
                    ]
                },
                statusOptions: [{
                    value: '0',
                    label: '推广列表'
                }, {
                    value: '1',
                    label: '电销列表'
                }],
                options1: [{
                    value: '0',
                    label: '电销组'
                }, {
                    value: '1',
                    label: '媒介'
                }],
                dialogForm: {
                    phoneNum:''
                },
                dialogRules:{
                    phoneNum: [
                        { required: true, message: '请输入手机号码', trigger: 'blur' }
                    ]
                },
                multipleSelection:[],//上传资料
                fileList: [],
                tableDataC1: [{
                    userName: '王小虎',
                    date: '2019-05-03',
                    fileName:'上传资源1',
                    operate:'查看图片',
                    deleteStatus:'已删除'
                }, {
                    userName: '王小虎2',
                    date: '2019-05-04',
                    fileName:'上传资源2',
                    operate:'下载录音',
                    deleteStatus:''
                }
                ],
                dialingTime:'',//跟进记录
                lineFormShow: false,
                formInline: { 
                  user: '',
                  region: ''
                },
                tableDataC2: [{  
                    dialingTime:'2019-2-18',
                    customerStatus: '跟进记录1',
                    dialing:'跟进记录2',
                    resourceAvailability:'跟进记录3',
                    customerfocus:'跟进记录4',
                    visited:'跟进记录5',
                    visitedNextTime:'跟进记录6',
                    creater:'跟进记录7'
                }
                ],
                tableDataC3: [{  //通话记录
                    name:'通话记录1',
                    role:'通话记录2',
                    callType:'外呼',
                    callTime:'通话记录3',
                    connectSituation:'通话记录4',
                    connectTime:'通话记录5',
                    operate:'查看1',
                },
                {
                    name:'通话记录1',
                    role:'通话记录2',
                    callType:'呼入',
                    callTime:'通话记录3',
                    connectSituation:'通话记录4',
                    connectTime:'通话记录5',
                    operate:'查看1',
                }
                ],
                tableDataC4: [{ //流转人员
                    serverRole:'话务',
                    serverName:'话务专员1',
                    allocatRule:'',
                    serverTime:'2018-03-29 17:13:15'
                },{
                    serverRole:'在线客服',
                    serverName:'王在线',
                    allocatRule:'',
                    serverTime:'2018-03-29 18:10:15'
                }],
            }             
        },
        methods: {
            submitForm(form) {
                this.$refs[form].validate((valid) => {
                    if (valid) {
                        alert('submit!');
                    } else {
                        console.log('error submit!!');
                        return false;
                    }
                });
            },
            submitDialogForm(dialogForm) {
                this.$refs[dialogForm].validate((valid) => {
                    if (valid) {
                        console.log('submit!!');
                        // 关闭弹窗
                        this.dialogFormVisible = false; 
                    } else {
                        console.log('error submit!!');
                        return false;
                    }
                });
            },
            number(){
    　　　                       this.form.customerPhone=this.form.customerPhone.replace(/[^\.\d]/g,'');
               this.form.customerPhone=this.form.customerPhone.replace('.','');
                                 　　},
            /*toggleSelection(rows) { 
                if (rows) {
                  rows.forEach(row => {
                    this.$refs.multipleTable.toggleRowSelection(row);
                  });
                } else {
                  this.$refs.multipleTable.clearSelection();
                }
            },*/
            handleSelectionChange(val) {  //上传资料
                this.multipleSelection = val;
            },
            handleRemove(file, fileList) {
                console.log(file, fileList);
            },
            handlePreview(file) {
              console.log(file);
            },
            handleExceed(files, fileList) {
              this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);
            },
            beforeRemove(file, fileList) {
              return this.$confirm(`确定移除 ${ file.name }？`);
            },
            editRecord() {
                console.log("编辑跟进记录");
                this.lineFormShow = true;
            },
            onConfirmAdd() { //确认添加
                console.log('submit!');
                this.lineFormShow = false;
                this.tableDataC2.push({
                    dialingTime:'2019-2-12',
                    customerStatus: 'new1',
                    dialing:'new2',
                    resourceAvailability:'new3',
                    customerfocus:'new4',
                    visited:'new5',
                    visitedNextTime:'new6',
                    creater:'new17'
                });
            },
            deteleDialogTip () { //删除提示弹框
                this.$confirm('确认删除？')
                  .then(_ => {
                    done();
                  })
                  .catch(_ => {});
            }, 
            //邀约来访
            inviteCustomer(){
            	 window.location.href="/tele/clueMyCustomerInfo/inviteCustomer?clueId="+clueId; 
            	
            },
            handleOperateFn(index, row) { //上传资源"查看图片、下载录音"
                console.log(index, row);
            },
            addRecord() { //添加记录
                this.tableDataC2.push({
                    dialingTime:`<el-form-item label="" size="mini">
                                    <el-select v-model="formInline.region" placeholder="客户状态">
                                      <el-option label="区域一" value="shanghai"></el-option>
                                      <el-option label="区域二" value="beijing"></el-option>
                                    </el-select>
                                  </el-form-item>`,
                    customerStatus: '',
                    dialing:'',
                    resourceAvailability:'',
                    customerfocus:'',
                    visited:'',
                    visitedNextTime:'',
                    creater:''
                });
            },
            handlePlay(index, row) { //通话记录播放btn
                console.log(index, row);
            },
            handleDownload(index, row) { //通话记录下载btn
                console.log(index, row);
            },
        },
        mounted(){
            document.getElementById('addCustomer').style.display = 'block';
        },
        created(){
            //初始资源类别数据
          	var  param={};
          	param.groupCode="clueCategory";
            axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
           	 addCustomerVM.categoryArr=response.data.data;
            });
          	 //初始化资源类型数据
       	 param={};
       	 param.groupCode="clueType";
           axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
             addCustomerVM.typeArr=response.data.data;
            });
           
          //初始化资源类型数据
      	   param={};
      	   param.groupCode="clueType";
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
            addCustomerVM.typeArr=response.data.data;
           });
          //初始化媒介
    	   param={};
    	   param.groupCode="medium";
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
           addCustomerVM.mediumArry=response.data.data;
         });
          //广告位
          param={};
          param.groupCode="adsense"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.adsenseArr=response.data.data;
           });
          
          //餐饮经验
          param={};
          param.groupCode="CateringExperience"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.CateringExperienceArr=response.data.data;
           });
          //职业
          param={};
          param.groupCode="occupation"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.occupationArr=response.data.data;
           });
          
          //合伙人
          param={};
          param.groupCode="partner"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.partnerArr=response.data.data;
           });
          
          //选址情况
          param={};
          param.groupCode="optionAddress"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.optionAddressArr=response.data.data;
           });
          //客户级别
          param={};
          param.groupCode="customerLevel"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.customerLevelArr=response.data.data;
           });
          //意向品类
          param={};
          param.groupCode="IntentionalCategory"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.IntentionalCategoryArr=response.data.data;
           });
        //投资金额
          param={};
          param.groupCode="ussm"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.ussmArr=response.data.data;
           });
          //店面大小
          param={};
          param.groupCode="StorefrontArea"; 
          axios.post('/dictionary/DictionaryItem/dicItemsByGroupCode',param).then(function (response) {  
              addCustomerVM.StorefrontAreaArr=response.data.data;
           });
    	}
    })
</script>
</html>