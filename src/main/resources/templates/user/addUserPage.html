<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:th="http://www.thymeleaf.org">
<head th:replace="_header_include::frag(~{::title},~{::link},~{})">
    <title>后台管理系统</title>
    <style>
        .userManage .leftBox{/*width: 200px;*/height: auto;border:1px solid #ebeef5;min-height: 480px;}
        .userManage .leftTitle{background:#ebeef5;text-indent: 20px;height: 40px;line-height: 40px;}
        .userManage .leftTree{padding:10px;}
        .userManage .rightTitle{background:#ebeef5;text-indent: 20px;height: 40px;line-height: 40px;}
    </style>
</head>
<body>
<div id="userManage" class="userManage mainPadding">  
    <el-breadcrumb separator="/" class="elBreadcrumb marginB20">
        <el-breadcrumb-item>Home</el-breadcrumb-item>
        <el-breadcrumb-item>系统管理</el-breadcrumb-item>
        <el-breadcrumb-item><a href="JavaScript:void(0)" data-url="a.html">用户管理</a></el-breadcrumb-item>
    </el-breadcrumb>

    <el-row :gutter="20">
        <el-form :model="form">
            <el-row>
                <el-col :span="6">
                    <el-form-item label="姓名：" :label-width="formLabelWidth1">
                        <el-input v-model="form.name" autocomplete="off"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="6">
                    <el-form-item label="登录用户名：" :label-width="formLabelWidth1">
                        <el-input v-model="form.loginName" autocomplete="off"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="6">
                    <el-form-item label="手机号：" :label-width="formLabelWidth1">
                        <el-input v-model="form.phone" autocomplete="off"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="6">
                    <el-form-item label="登录密码：" :label-width="formLabelWidth1">
                        <el-input v-model="form.psw" autocomplete="off"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="6">
                    <el-form-item label="所属角色：" :label-width="formLabelWidth1">
                        <el-row>
                            <el-col :span="12">
                                <el-input v-model="form.role" autocomplete="off"></el-input>                                
                            </el-col>
                            <el-col :span="10">
                                <el-button type="primary" size="small" @click="dialogFormChooseRole = true">选择角色</el-button>
                            </el-col>    
                        </el-row>
                    </el-form-item>
                </el-col>
                <el-col :span="6">
                    <el-form-item label="所属组织：" :label-width="formLabelWidth1">
                        <el-row>
                            <el-col :span="12">
                                <el-input v-model="form.org" autocomplete="off"></el-input>                                
                            </el-col>
                            <el-col :span="10">
                                <el-button type="primary" size="small" @click="dialogFormChooseOrg = true">选择组织</el-button>
                            </el-col>    
                        </el-row>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="6">
                    <el-form-item label="用户状态：" :label-width="formLabelWidth1">
                        <el-select v-model="value" placeholder="请选择">
                            <el-option
                                v-for="item in options"
                                :key="item.value"
                                :label="item.label"
                                :value="item.value">
                            </el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="6" :offset="6">
                    <el-form-item>
                        <el-button type="primary" @click="onSubmit">立即创建</el-button>
                        <el-button>取消</el-button>
                    </el-form-item>
                </el-col>
            </el-row>
        </el-form>
    </el-row>

    <el-dialog title="选择角色" :visible.sync="dialogFormChooseRole"s>
        <el-form :model="form">
            <el-table 
            ref="multipleTable"
            tooltip-effect="dark"
            style="width: 100%"
            border
            :data="dataTableRole"
            highlight-current-row
            @current-change="handleCurrentChange"
            @row-click = "showRow" 
            >
            <el-table-column align="center" width="55" label="选择">
                <template scope="scope">
                    <el-radio :label="scope.$index" v-model="tableRadio">&nbsp;</el-radio>
                </template>
            </el-table-column>
            <el-table-column align="center" prop="name" label="角色名称"></el-table-column>
            <el-table-column align="center" prop="describe" label="角色描述"></el-table-column>
        </el-table>
        </el-form>        
    </el-dialog>
    <el-dialog title="选择组织" :visible.sync="dialogFormChooseOrg" append-to-body>
        <el-form :model="form">
            <el-tree
                :data="dataTree"              
                node-key="id"
                :default-expanded-keys="[1,2,3]"
                ref="tree"
                highlight-current
                class="leftTree">
            </el-tree>
        </el-form>        
    </el-dialog>
</div>
<!-- import common js-->
<div th:include="_footer_include :: #jsLib"></div>
</body>
<script>
    new Vue({
        el: '#userManage',
        data: function() {
            return {
                tableRadio:'',
                dialogFormChooseRole: false,
                dialogFormChooseOrg: false,
                form: {
                    name: '',
                    loginName: '',
                    phone: '',
                    psw:'',
                    role: '',
                    org: ''
                },
                formLabelWidth: '150px',
                formLabelWidth1: '120px',
                dataTree: [{
                    id: 0,
                    label: '根目录',
                    children: [{
                        id: 1,
                        label: '推广中心',
                        children: [{
                            id: 4,
                            label: '推广客服',
                            children: [{
                                id: 9,
                                label: '客服一组'
                            }, {
                                id: 10,
                                label: '客服二组'
                            }]
                        }]
                        }, {
                        id: 2,
                        label: '招商中心',
                        children: [{
                            id: 5,
                            label: '秦皇岛招商中心'
                        }, {
                            id: 6,
                            label: '石家庄招商中心'
                        }]
                        }, {
                        id: 3,
                        label: '商务中心',
                        children: [{
                            id: 7,
                            label: '商务一'
                        }, {
                            id: 8,
                            label: '商务二'
                        }]
                    }]
                }],
                dataTableRole:[
                    {
                        name:"推广客服",
                        describe:'推广客服描述',
                        index:0
                    },{
                        name:"推广内勤文员",
                        describe:'推广内勤文员描述',
                        index:1
                    }
                ],
                options: [{
                    value: '0',
                    label: '启用'
                }, {
                    value: '1',
                    label: '禁用'
                },{
                    value: '2',
                    label: '锁定'
                }],
                value: '0'
            }        	  
        },
        methods: {
            //row-click    当某一行被点击时会触发该事件 row, event, column
            showRow(row){
            //赋值给radio
                this.tableRadio = this.dataTableRole.indexOf(row);
            },
            /* urrent-change    当表格的当前行发生变化的时候会触发该事件，如果要高亮当前行，请打开表格的 highlight-current-row 属性    currentRow, oldCurrentRow */
            handleCurrentChange(val,index) {
                this.currentRow = val;
                this.$emit('data',val.pkg);
            },
            getCurrentRow(val){
                console.log(val)
            },
            onSubmit() {
                console.log('submit!');
            }
        }
    })
</script>
</html>