<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org">
<head th:include="_header_include::frag(~{::title},~{},~{})">
    <title>3.4	客户重单列表</title>
    <style>
    </style>
</head>
<body>
<div v-loading="loading" id="organizationManage" class="organizationManage mainPadding" >  
    <el-breadcrumb separator="/" class="elBreadcrumb marginB20" >
        <el-breadcrumb-item>Home</el-breadcrumb-item>
        <el-breadcrumb-item>电销管理</el-breadcrumb-item>
        <el-breadcrumb-item><a href="/repetition/customerrePetitionList" data-url="b.html">3.4	客户重单列表</a></el-breadcrumb-item>
    </el-breadcrumb>
    <el-row class="marginB10">
        <el-col :xs="12" :sm="16" :md="16" :lg="18" :xl="12">
            <el-button type="primary" @click="cancelButton">撤销申请</el-button>
            <el-button type="primary" @click="detailButton">查看详情</el-button>
        </el-col>
        </el-row>
<el-row class="marginB10">
            <el-row class="marginB10">
              
				<div class="block">
					
  					<el-select filterable v-model="status" placeholder="处理状态">
					    <el-option
					      v-for="item in statusList"
					      :key="item.value"
					      :label="item.label"
					      :value="item.value">
					    </el-option>
  					</el-select>
  					<el-select filterable v-model="repeatStatus" placeholder="是否重单">
					    <el-option
					      v-for="item in repetitionList"
					      :key="item.value"
					      :label="item.label"
					      :value="item.value">
					    </el-option>
  					</el-select>
  					<el-input style="width:15%;"  v-model="constomerName" placeholder="客户姓名"></el-input>
  					<el-input style="width:15%;"  v-model="constomerPhone" placeholder="客户手机号"></el-input>
  					<el-button type="primary" @click="search">搜索</el-button>
				</div>
            </el-row>
            <el-row>
                <el-table 
                    ref="multipleTable"
                    tooltip-effect="dark"
                    empty-text="无数据"
                    style="width: 100%"
                    border
                    :data="dataTable"  @selection-change="handleSelectionChange">
                     <el-table-column align="center" prop="id" type="selection" width="55"></el-table-column> 
                     <!-- <el-table-column prop="date" label="全选" width="180"></el-table-column>  -->
                   <el-table-column align="center" prop="projects" label="序号"></el-table-column>
                    <el-table-column align="center" prop="telemarketingTeam" label="客户手机号"></el-table-column>
                    <el-table-column align="center" prop="telemarketingTeam" label="重单结果"></el-table-column>
                    <el-table-column align="center" prop="status" label="处理状态" :formatter="transformStatus"></el-table-column>
                    <el-table-column align="center" prop="telemarketingTeam" label="比例"></el-table-column>
                    <el-table-column align="center" prop="telemarketingTeam" label="重单人员列表"></el-table-column>
                </el-table>
                 <table-pagination :pager="pager"  @change="search"></table-pagination>
            </el-row>
      
    </el-row>

    <!-- dialog -->
    <el-dialog title="重单详情" :visible.sync="dialogFormVisible">
        <el-form   class="width500">
            <el-form-item label="重单手机号：" :label-width="formLabelWidth" >
            </el-form-item>
            <el-form-item label="备注：" :label-width="formLabelWidth" >
            </el-form-item>
					
            <el-form-item label="处理状态：" :label-width="formLabelWidth" >
                
            </el-form-item>
            <el-form-item label="处理结果："  :label-width="formLabelWidth" >
                
            </el-form-item>
            <el-form-item label="分配比例：" :label-width="formLabelWidth" >
                <el-table 
                    ref="multipleTable"
                    tooltip-effect="dark"
                    empty-text="无数据"
                    style="width: 100%"
                    border
                    :data="dataTable"  >
                    <el-table-column align="center" prop="telemarketingTeam" label="顾问姓名"></el-table-column>
                    <el-table-column align="center" prop="telemarketingTeam" label="比例"></el-table-column>
                </el-table>
            </el-form-item>
        </el-form>
    </el-dialog>   
            
         
</div>
<input id="addOrUpdate" type="hidden" >
</body>
<!-- import common js-->
<div th:include="_footer_include :: #jsLib"></div>
<script th:inline="javascript">

   var orgVM =  new Vue({
        el: '#organizationManage',
        data: {
        	constomerPhone:"",
        	constomerName:"",
        	status:"",
        	repeatStatus:"",
        	dialogFormVisible:false,
        	repetitionList:"",
        	exportFormVisible:false,
        	formLabelWidth: '100px',
        	dialogFormVisible: false,
        	addOrModifyDialogTitle:"",
        	dialogFormVisible:false,
        	dataTable:[],
        	multipleSelection: [],
        	statusList:[
        		 {
               		value: '0',
                   label: '待审批处理'	
               	},
               	{
                  value: '1',
                   label: '已审批处理'	
                  }
        	],
        	 repetitionList:[
        		 {
                		value: '0',
                    label: '启用'	
                	},
                	{
                   value: '1',
                    label: '禁用'	
                   }
         	],
            pager:{
                total: 0,
                currentPage: 1,
                pageSize: 20,
            },
            loading:false,
         
             
        },
        methods: {
        	detailButton(){
        		this.dialogFormVisible = true;
        	},
        	cancelButton(){
        		this.$confirm("确定要撤销选中的重单申请?", '撤销申请', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                   	// 查询 table 需要数据
                    var param = {};
                    var deleInfo=this.multipleSelection;
  	        	    var ids="";
  		            if(null!=deleInfo){
  		             for ( var i = 0; i <deleInfo.length; i++){
  		            	if("" == ids){
  		            		ids = deleInfo[i].id
  		            	}else{
  		            		ids = ids+","+deleInfo[i].id
  		            	}
  		             }
  		             var param={};
  		             param.ids=ids;
 	                 axios.post('/invitearea/deleInviteArea',param).then(function (response) {
 	                  	  console.log(response);
 	                      if(null !==response && response.data !=null && response.data.code=='0'){
 	                    	  window.location.href="/invitearea/inviteAreaList"; 
 	                     }else{
 	                    	 alert(response.data.data.message);
  	                  	  	return ;
 	                     } 
 	                  }).catch(function (error) {
                           console.log(error);
                       })
                       .then(function () {
                         // always executed
                       });  
  	              
                  }
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });          
                });
        	},
        	search(){
        		
        	},
        	handleSelectionChange(val) {
                this.multipleSelection = val;
            },
            transformStatus(row, column, cellValue, index) {
            	  var text="";
                  if(cellValue=="0"){
                	  text="启用"
                  }else if(cellValue=="1"){
                	  text="禁用"
                  }
                  return text;
              },
        },
        created(){
        	
        	
        }//created方法 结束
    })
</script>
</html>