<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="_header_include::frag(~{::title},~{::link},~{})">
    <title>我的工作台-电销员工</title>
    <link rel="stylesheet" th:href="@{/css/custom/console/console.css}">
</head>
<body>
<div id="mainDiv"  class="mainPadding consoleStyle" style="display: none;">
    <!-- 工作台 -->
    <el-breadcrumb separator="/" class="elBreadcrumb marginB20">
        <el-breadcrumb-item>Home</el-breadcrumb-item>
        <el-breadcrumb-item>电销中心</el-breadcrumb-item>
        <el-breadcrumb-item>我的工作台</el-breadcrumb-item>
    </el-breadcrumb>
    <el-row>
        <div class="tip">感谢您辛苦工作的第<em>--</em>天，累计业绩达<em>--</em>元，继续努力！</div>
        <div class="affiche marginB20">
            <span class="f-fl">系统公告：</span>   
            <marquee class="f-fl" style="width: 90%;">
                <ul>
                    <li v-for="item in items" :key="item.id">{{ item.content }}</li>
                </ul>                
            </marquee>         
        </div>
        <div class="title">
            <div class="leftbox f-fl"><img th:src="@{/images/icon_kb.png}" alt="" class="f-fl">数字看板</div>
        </div>
        <ul class="board">
            <li>
                <div class="tit">今日领取资源数</div>
                <div class="cnt">
                    <div class="f-fl">{{receiveTodayNum}}</div>
                    <div class="f-fr"><img th:src="@{/images/icon_receive.png}" alt=""></div>
                </div>
            </li>
            <li>
                <div class="tit">今日分配资源数</div>
                <div class="cnt">
                    <div class="f-fl">{{assignTodayNum}}</div>
                    <div class="f-fr"><img th:src="@{/images/icon_distribution.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2">
                <div class="tit">今日邀约数</div>
                <div class="cnt">
                    <div class="f-fl">{{todayAppiontmentNum}}</div>
                    <div class="f-fr"><img th:src="@{/images/icon_appointment.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2">
                <div class="tit">今日到访数</div>
                <div class="cnt">
                    <div class="f-fl">--</div>
                    <div class="f-fr"><img th:src="@{/images/icon_arrive.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle3">
                <div class="tit">今日签约数</div>
                <div class="cnt">
                    <div class="f-fl">--</div>
                    <div class="f-fr"><img th:src="@{/images/icon_sign.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle3">
                <div class="tit">今日通话时长</div>
                <div class="cnt">
                    <div class="f-fl">{{todayTalkTime}}</div>
                    <div class="f-fr"><img th:src="@{/images/icon_call.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle4">
                <div class="tit">当月到访数</div>
                <div class="cnt">
                    <div class="f-fl">--</div>
                    <div class="f-fr"><img th:src="@{/images/icon_arrive.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle4">
                <div class="tit">当月签约数</div>
                <div class="cnt">
                    <div class="f-fl">--</div>
                    <div class="f-fr"><img th:src="@{/images/icon_sign.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle5">
                <div class="tit">累计邀约数</div>
                <div class="cnt">
                    <div class="f-fl">--</div>
                    <div class="f-fr"><img th:src="@{/images/icon_invitation.png}" alt=""></div>
                </div>
            </li>
        </ul>
        <ul class="boardTab">
            <li>
                <el-tabs v-model="activeName" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_achievement.png}" alt="">
                        <div class="name">当月业绩</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_achievement.png}" alt="">
                        <div class="name">季度业绩</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_achievement.png}" alt="">
                        <div class="name">年度业绩</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle2">
                <el-tabs v-model="activeName2" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_ranking.png}" alt="">
                        <div class="name">组内排名</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_ranking.png}" alt="">
                        <div class="name">组内排名</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_ranking.png}" alt="">
                        <div class="name">组内排名</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle3">
                <el-tabs v-model="activeName3" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_disparity.png}" alt="">
                        <div class="name">距组内上一名业绩差</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_disparity.png}" alt="">
                        <div class="name">距组内上一名业绩差</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_disparity.png}" alt="">
                        <div class="name">距组内上一名业绩差</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle4">
                <el-tabs v-model="activeName4" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_gspm.png}" alt="">
                        <div class="name">公司排名</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_gspm.png}" alt="">
                        <div class="name">公司排名</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_gspm.png}" alt="">
                        <div class="name">公司排名</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle5">
                <el-tabs v-model="activeName5" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_yjc.png}" alt="">
                        <div class="name">距公司上一名业绩差</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_yjc.png}" alt="">
                        <div class="name">距公司上一名业绩差</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_yjc.png}" alt="">
                        <div class="name">距公司上一名业绩差</div>
                        <div class="num">--</div>
                    </el-tab-pane>
                </el-tabs>
            </li>
        </ul>
        <!-- 消息提醒 -->
        <!-- <div v-show="newsBox">
            <div class="title">
                <div class="leftbox f-fl"><img th:src="@{/images/icon_remind.png}" alt="" class="f-fl">消息提醒</div>
                <div class="rightbox f-fr">进入消息中心<img th:src="@{/images/icon_arrow.png}" alt="" class="f-fr"></div>
            </div>
            <ul class="news">
                <li v-for="item in newsData" :key="item.id"><em></em>{{ item.content }}</li>
            </ul>  
        </div> -->
        <dialog-console :param="consoleNewsParam"></dialog-console>
    </el-row>
    <!-- 工作台结束 -->
    <!-- 今日待跟进客户资源 -->
    <div class="title">
        <div class="leftbox f-fl">今日待跟进客户资源</div>
        <div class="rightbox f-fr">进入我的客户<img th:src="@{/images/icon_arrow.png}" alt="" class="f-fr"></div>
    </div>
    <el-table 
        ref="multipleTable"
        tooltip-effect="dark"
        border
        :data="dataTable" 
        @row-dblclick="showClueDetailInfo"        
        >
        <el-table-column align="center" type="index" width="55" prop="clueId" label="序号"></el-table-column>
        <el-table-column align="center" prop="cusLevelName" label="客户级别"></el-table-column>
        <el-table-column align="center" prop="cusName" label="客户姓名"></el-table-column>
        <el-table-column align="center" prop="phone" label="手机号" width="170">
            <template slot-scope="scope">
                {{scope.row.phone}}
                <input type='hidden'>
                <i class="el-icon-phone-outline"  @click="customerEidt(scope.row.clueId)"  style="margin:0 10px;font-size: 16px;cursor: pointer;"></i>  
                <el-tag v-if="scope.row.tag">{{scope.row.tag}}</el-tag>
            </template>
        </el-table-column>
        <el-table-column prop="" label="跟进记录"  align="center">
            <template slot-scope="scope">
                <el-button @click="openTrackingDialog(scope.row.clueId)" type="text" size="small">点击查看</el-button>
            </template>
        </el-table-column>
        <el-table-column align="center" prop="customerStatusName" label="客户状态"></el-table-column>
        <el-table-column align="center" prop="repeatPhones" label="重复手机号资源" width="170">
            <template slot-scope="scope">
                <el-button @click="repeatPhonesClick(scope.row)" type="text" size="small">点击查看</el-button>
            </template>
        </el-table-column>
        <el-table-column align="center" prop="focusPoint" label="客户关注点" width="170"></el-table-column>
        <el-table-column align="center" prop="nextTimeVisit" label="下次回访时间"></el-table-column>
        <el-table-column align="center" prop="assignTime" label="分配时间" width="170" sortable></el-table-column>
    </el-table>
    <table-pagination class="marginB20" :pager="pager" @change="initTableData"></table-pagination>
    <!-- 快速领取新资源 -->
    <el-row class="marginB20">
        <div class="title">
            <div class="leftbox f-fl">快速领取新资源</div>
            <div class="rightbox f-fr">进入公有池挑选资源<img th:src="@{/images/icon_arrow.png}" alt="" class="f-fr"></div>
        </div>
        <el-table :data="tableData" border style="width: 100%" tooltip-effect="light"  ref="multipleTable" @selection-change="handleSelectionChange"    @row-dblclick="showClueDetailInfo">
            <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
            <el-table-column prop="cusName" label="客户姓名"  align="center"></el-table-column>
            <el-table-column prop="typeName" label="资源类型" align="center"></el-table-column>
            <el-table-column prop="categoryName" label="资源类别" align="center"></el-table-column>
            <el-table-column prop="" label="跟进记录"  align="center">
                <template slot-scope="scope">
                    <el-button @click="openTrackingDialog(scope.row.clueid)" type="text" size="small">
                        点击查看
                    </el-button>
                </template>
            </el-table-column>
            <el-table-column prop="" label="重复手机号资源"  align="center" width="120">
                <template slot-scope="scope">
                    <el-button @click="repeatPhonesClick(scope.row)" type="text" size="small">点击查看</el-button>
                </template>
            </el-table-column>
            <el-table-column prop="releaseReasonName" label="释放原因" align="center" width="170"></el-table-column>
            <el-table-column prop="customerStatusName" label="客户状态" align="center" width="150"></el-table-column>
            <el-table-column prop="" label="操作"  align="center" width="120">
                <template slot-scope="scope">
                    <el-button @click="openReceive(scope.row)" type="text" size="small">快速领取</el-button>
                </template>
            </el-table-column>
        </el-table>
    </el-row>   
    <!-- 跟进记录 -->
    <dialog-tracking :param="trackingParam"></dialog-tracking>
    <!-- 重复资源信息 -->
    <el-dialog :title="'手机号'+dailogTitleType+'重复资源信息'"    :visible.sync="repeatPhonesDialog">
        <el-table
            ref="singleTable" 
            tooltip-effect="dark"
            style="width: 100%"
            border
            :data="repeatPhonesTable" 
            >
            <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
            <el-table-column align="center" prop="createDate" label="资源创建时间"></el-table-column>
            <el-table-column align="center" prop="cusPhone" label="联系方式"></el-table-column>
            <el-table-column align="center" prop="teleDirectorName" label="电销总监"></el-table-column>
            <el-table-column align="center" prop="teleSaleName" label="创业顾问"></el-table-column>
            <el-table-column align="center" prop="teleGorupName" label="电销组"></el-table-column>
            <el-table-column align="center" prop="teleProject" label="电销组负责项目"></el-table-column>
            <el-table-column align="center" prop="createUserRoleName" label="资源创建人角色"></el-table-column>  
            <el-table-column align="center" prop="createUserName" label="资源创建人"></el-table-column> 
        </el-table>
    </el-dialog>
    <el-dialog :title="receiveTitle" :visible.sync="receiveDialog">
        <el-table
            ref="singleTable" 
            tooltip-effect="dark"
            style="width: 100%"
            border
            :data="receiveTable" 
            >
            <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
            <el-table-column align="center" prop="cusName" label="资源姓名"></el-table-column>
            <el-table-column align="center" prop="phone" label="手机号"></el-table-column>
        </el-table>
    </el-dialog>
</div>

<!-- import common js-->
<div th:include="_footer_include :: #jsLib"></div>
<script th:src="@{/js/custom/console/consoleTelemarketing.js?v=1.0.0}"></script>
</body>
</html>