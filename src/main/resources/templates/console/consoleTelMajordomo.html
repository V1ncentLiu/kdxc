<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="_header_include::frag(~{::title},~{::link},~{})">
    <title>我的工作台-电销总监</title>
    <link rel="stylesheet" th:href="@{/css/custom/console/console.css}">
</head>
<body>
<div id="mainDiv"  class="mainPadding consoleStyle" style="display: none;">
    <!-- 工作台 -->
    <el-breadcrumb separator="/" class="elBreadcrumb marginB20">
        <el-breadcrumb-item>Home</el-breadcrumb-item>
        <el-breadcrumb-item>电销管理</el-breadcrumb-item>
        <el-breadcrumb-item>我的工作台</el-breadcrumb-item>
    </el-breadcrumb>
    <el-row>
        <div class="tip">感谢您辛苦工作的第<em>{{workDay}}</em>天，组内累计业绩达<em>{{dashboardSale.sumCumulativePerformance}}</em>元，继续努力！</div>
        <!-- 系统公告 -->
        <div class="affiche marginB20" v-if="afficheBox">
            <span class="f-fl"><img th:src="@{/images/icon_notice.png}" alt="" class="f-fl" style="margin-right: 10px;">系统公告：</span>  
            <div class="f-fl" style="width: 86%;">
                <marquee onmouseover="this.stop()" onmouseout="this.start()">
                    <span style="margin-right: 50px;" v-for="item in items" :key="item.id">{{ item.content }}</span>                
                </marquee> 
            </div>                     
        </div>
        <!-- <div class="title">
            <div class="leftbox f-fl"><img th:src="@{/images/icon_kb.png}" alt="" class="f-fl">数字看板</div>
        </div> -->
        <ul class="board board2">
            <li class="boardStyle0 bg1">
                <div class="cnt">
                    <div class="toptitle">待分配资源</div>
                    <!-- <div class="con">{{assignClueNum}}<em>个</em></div> -->
                    <div class="con"><span style="float: left;">{{dashboardSale.todayUnallocatedResources}}</span><em style="float: left;height: 78px;line-height: 87px;">个</em></div>
                </div>
            </li>
            <li class="boardStyle0 bg2">
                <div class="cnt">
                    <div class="toptitle">今日接收资源</div>
                    <!-- <div class="con">{{receiveClueNum}}<em>个</em></div> -->
                    <div class="con"><span style="float: left;">{{dashboardSale.todayAcceptResources}}</span><em style="float: left;height: 78px;line-height: 87px;">个</em></div>
                </div>
            </li>
            <li class="boardStyle0 bg3">
                <div class="cnt">
                    <div class="toptitle">今日领取资源</div>
                    <!-- <div class="con">{{todaygetClueNum}}<em>个</em></div> -->
                    <div class="con"><span style="float: left;">{{dashboardSale.todayReceiveResources}}</span><em style="float: left;height: 78px;line-height: 87px;">个</em></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor1">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">今日首次邀约数</div>
                        <!-- <div class="con">{{todayAppiontmentNum}}</div> -->
                        <div class="con"><span>{{dashboardSale.todayFirstInvitation}}</span><em>个</em></div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_appointment.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor2">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">今日首访数</div>
                        <div class="con">{{dashboardSale.todayFirstVisit}}</div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_jrsfs.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor3">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">今日签约数</div>
                        <div class="con">{{dashboardSale.todaySign}}</div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_jrqys.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor4">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">预计明日到访数</div>
                        <!-- <div class="con">{{tomorrowArriveTime}}</div> -->
                        <div class="con">{{dashboardSale.tomorrowVisit}}</div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_jrsfs.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor5">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">当月首访数</div>
                        <div class="con">{{dashboardSale.monthFirstVisit}}</div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_jrqys.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor6">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">当月签约数</div>
                        <div class="con">{{dashboardSale.monthSign}}</div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_jrsfs.png}" alt=""></div>
                </div>
            </li>
            <li class="boardStyle2 bgColor7">
                <div class="cnt">
                    <div class="f-fl">
                        <div class="toptitle">累计邀约数</div>
                        <div class="con">{{dashboardSale.totalInvitation}}</div>
                    </div>
                    <div class="f-fr"><img th:src="@{/images/icon_invitation.png}" alt=""></div>
                </div>
            </li>
        </ul>
        <div class="boardTabList">
            <el-tabs v-model="activeName" @tab-click="handleClick">
                <el-tab-pane label="当月" name="1">
                    <ul class="tabUl">
                        <li class="tabLi1">
                            <img th:src="@{/images/icon_achievement.png}" alt="">
                            <div class="name">业绩</div>
                            <div class="num"><span>{{dashboardSale.sumMonthPerformance}}</span><em>元</em></div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi2">
                            <img th:src="@{/images/icon_ranking.png}" alt="">
                            <div class="name">组内排名</div>
                            <div class="num">第<span>{{dashboardSale.mounthDepartmentRank}}</span>名</div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi3">
                            <img th:src="@{/images/icon_gspm.png}" alt="">
                            <div class="name">公司排名</div>
                            <div class="num">第<span>{{dashboardSale.mounthCompanyRank}}</span>名</div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi4">
                            <img th:src="@{/images/icon_disparity.png}" alt="">
                            <div class="name">距组内上一名业绩差</div>
                            <div class="num"><span>{{dashboardSale.monthDepartmentPerformanceDifference}}</span><em>元</em></div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi5">
                            <img th:src="@{/images/icon_yjc.png}" alt="">
                            <div class="name">距公司上一名业绩差</div>
                            <div class="num"><span>{{dashboardSale.monthCompanyPerformanceDifference}}</span><em>元</em></div>
                        </li>
                    </ul>
                </el-tab-pane>
                <el-tab-pane label="季度" name="2">
                    <ul class="tabUl">
                        <li class="tabLi1">
                            <img th:src="@{/images/icon_achievement.png}" alt="">
                            <div class="name">业绩</div>
                            <div class="num"><span>{{dashboardSale.sumQuarterPerformance}}</span><em>元</em></div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi2">
                            <img th:src="@{/images/icon_ranking.png}" alt="">
                            <div class="name">组内排名</div>
                            <div class="num">第<span>{{dashboardSale.quarterDepartmentRank}}</span>名</div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi3">
                            <img th:src="@{/images/icon_gspm.png}" alt="">
                            <div class="name">公司排名</div>
                            <div class="num">第<span>{{dashboardSale.quarterCompanyRank}}</span>名</div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi4">
                            <img th:src="@{/images/icon_disparity.png}" alt="">
                            <div class="name">距组内上一名业绩差</div>
                            <div class="num"><span>{{dashboardSale.quarterDepartmentPerformanceDifference}}</span><em>元</em></div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi5">
                            <img th:src="@{/images/icon_yjc.png}" alt="">
                            <div class="name">距公司上一名业绩差</div>
                            <div class="num"><span>{{dashboardSale.quarterCompanyPerformanceDifference}}</span><em>元</em></div>
                        </li>
                    </ul>
                </el-tab-pane>
                <el-tab-pane label="年度" name="3">
                    <ul class="tabUl">
                        <li class="tabLi1">
                            <img th:src="@{/images/icon_achievement.png}" alt="">
                            <div class="name">业绩</div>
                            <div class="num"><span>{{dashboardSale.sumYearPerformance}}</span><em>元</em></div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi2">
                            <img th:src="@{/images/icon_ranking.png}" alt="">
                            <div class="name">组内排名</div>
                            <div class="num">第<span>{{dashboardSale.yearDepartmentRank}}</span>名</div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi3">
                            <img th:src="@{/images/icon_gspm.png}" alt="">
                            <div class="name">公司排名</div>
                            <div class="num">第<span>{{dashboardSale.yearCompanyRank}}</span>名</div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi4">
                            <img th:src="@{/images/icon_disparity.png}" alt="">
                            <div class="name">距组内上一名业绩差</div>
                            <div class="num"><span>{{dashboardSale.yearDepartmentPerformanceDifference}}</span><em>元</em></div>
                            <div class="line"></div>
                        </li>
                        <li class="tabLi5">
                            <img th:src="@{/images/icon_yjc.png}" alt="">
                            <div class="name">距公司上一名业绩差</div>
                            <div class="num"><span>{{dashboardSale.yearCompanyPerformanceDifference}}</span><em>元</em></div>
                        </li>
                    </ul>
                </el-tab-pane>
            </el-tabs>
        </div>
        <!-- <ul class="boardTab">
            <li>
                <el-tabs v-model="activeName" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_achievement.png}" alt="">
                        <div class="name">当月业绩</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_achievement.png}" alt="">
                        <div class="name">季度业绩</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_achievement.png}" alt="">
                        <div class="name">年度业绩</div>
                        <div class="num"></div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle2">
                <el-tabs v-model="activeName2" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_ranking.png}" alt="">
                        <div class="name">事业部内排名</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_ranking.png}" alt="">
                        <div class="name">事业部内排名</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_ranking.png}" alt="">
                        <div class="name">事业部内排名</div>
                        <div class="num"></div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle3">
                <el-tabs v-model="activeName3" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_disparity.png}" alt="">
                        <div class="name">距事业部上一名业绩差</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_disparity.png}" alt="">
                        <div class="name">距事业部上一名业绩差</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_disparity.png}" alt="">
                        <div class="name">距事业部上一名业绩差</div>
                        <div class="num"></div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle4">
                <el-tabs v-model="activeName4" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_gspm.png}" alt="">
                        <div class="name">公司排名</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_gspm.png}" alt="">
                        <div class="name">公司排名</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_gspm.png}" alt="">
                        <div class="name">公司排名</div>
                        <div class="num"></div>
                    </el-tab-pane>
                </el-tabs>
            </li>
            <li class="boardTabStyle5">
                <el-tabs v-model="activeName5" @tab-click="handleClick">
                    <el-tab-pane label="当月" name="1">
                        <img th:src="@{/images/icon_yjc.png}" alt="">
                        <div class="name">距公司上一名业绩差</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="季度" name="2">
                        <img th:src="@{/images/icon_yjc.png}" alt="">
                        <div class="name">距公司上一名业绩差</div>
                        <div class="num"></div>
                    </el-tab-pane>
                    <el-tab-pane label="年度" name="3">
                        <img th:src="@{/images/icon_yjc.png}" alt="">
                        <div class="name">距公司上一名业绩差</div>
                        <div class="num"></div>
                    </el-tab-pane>
                </el-tabs>
            </li>
        </ul> -->
        <!-- 消息提醒 -->
        <dialog-console :param="consoleNewsParam"></dialog-console>               
    </el-row>
    <!-- 工作台结束 -->
    <!-- 待分配资源 -->
    <el-row>
        <div class="title">
            <div class="leftbox f-fl">待分配资源</div>
            <div class="rightbox f-fr">
                <img th:src="@{/images/icon_arrow.png}" alt="" class="f-fr">
                <span class="f-fr" @click="gotoPendingAllocation">进入待分配资源列表</span>
                <el-button type="primary" size="small" class="f-fr btn" @click="toAllocationClue">快速分配资源</el-button>
            </div>
        </div>
        <el-row class="mainWhiteBg mainWhitePadding">
            <el-table 
                ref="multipleTable"
                tooltip-effect="dark"
                style="width: 100%"
                border
                :data="dataTable" 
                @selection-change="handleSelectionChange"
                >
                <el-table-column align="center" type="selection"  prop="clueId"  width="55"></el-table-column>
                <el-table-column align="center" prop="cusName" label="客户姓名"></el-table-column>
                <el-table-column align="center" prop="searchWord" label="搜索词"></el-table-column>
                <el-table-column align="center" prop="projectName" label="资源项目"></el-table-column>
                <el-table-column align="center" prop="category" label="资源类别" ></el-table-column>
                <el-table-column align="center" prop="type" label="资源类型"></el-table-column>
                <el-table-column align="center" prop="createTime" label="创建时间" width="170"></el-table-column>
                <el-table-column align="center" prop="phone" label="手机号" width="170"></el-table-column>
                <el-table-column align="center" prop="repeatPhones" label="重复手机号资源" width="170">
                    <template slot-scope="scope">
                        <div v-if="scope.row.isRepeatPhone ==1">
                           <el-button @click="showRepeatPhone(scope.row)" type="text" size="small">点击查看</el-button>
                        </div>
                        <div v-else></div>
                    </template>
                </el-table-column>
                <el-table-column align="center" prop="messagePoint" label="留言重点" width="170"></el-table-column>
                <el-table-column align="center" prop="messageTime" label="留言时间" width="170"></el-table-column>
                <el-table-column align="center" prop="operationName" label="资源专员"></el-table-column>
            </el-table>
            <table-pagination :pager="pager" @change="searchTable"></table-pagination>
        </el-row>
    </el-row>
    <!-- 重复手机号资源表格 -->
    <el-dialog :title="'资源ID'+dailogTitleType+'重复手机号资源信息'"    :visible.sync="repeatPhonesDialog">
        <div v-show="showPhoneTable">
            <span>手机号{{phone}}重复手机号资源</span>
            <el-table ref="singleTable" tooltip-effect="dark" style="width: 100%" border :data="repeatPhonesTable">
                <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
                <el-table-column align="center" prop="createTime" label="资源创建时间"></el-table-column>
                <el-table-column align="center" prop="phoneChangeTime" label="联系方式创建时间"></el-table-column>
                <el-table-column align="center" prop="teleDirectorName" label="电销总监"></el-table-column>
                <el-table-column align="center" prop="teleSaleName" label="电销顾问"></el-table-column>
                <el-table-column align="center" prop="teleGorupName" label="电销组"></el-table-column>
                <el-table-column align="center" prop="teleProject" label="电销组负责项目"></el-table-column>
                <el-table-column align="center" prop="createUserRoleName" label="资源创建人角色"></el-table-column>
                <el-table-column align="center" prop="createUserName" label="资源创建人"></el-table-column>
            </el-table>
        </div>
        <div v-show="showPhoneTable2">
            <span>手机号{{phone2}}重复手机号资源</span>
            <el-table ref="singleTable2" tooltip-effect="dark" style="width: 100%" border :data="repeatPhonesTable2">
                <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
                <el-table-column align="center" prop="createTime" label="资源创建时间"></el-table-column>
                <el-table-column align="center" prop="phoneChangeTime" label="联系方式创建时间"></el-table-column>
                <el-table-column align="center" prop="teleDirectorName" label="电销总监"></el-table-column>
                <el-table-column align="center" prop="teleSaleName" label="电销顾问"></el-table-column>
                <el-table-column align="center" prop="teleGorupName" label="电销组"></el-table-column>
                <el-table-column align="center" prop="teleProject" label="电销组负责项目"></el-table-column>
                <el-table-column align="center" prop="createUserRoleName" label="资源创建人角色"></el-table-column>
                <el-table-column align="center" prop="createUserName" label="资源创建人"></el-table-column>
            </el-table>
        </div>
        <div v-show="showPhoneTable3">
            <span>手机号{{phone3}}重复手机号资源</span>
            <el-table ref="singleTable3" tooltip-effect="dark" style="width: 100%" border :data="repeatPhonesTable3">
                <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
                <el-table-column align="center" prop="createTime" label="资源创建时间"></el-table-column>
                <el-table-column align="center" prop="phoneChangeTime" label="联系方式创建时间"></el-table-column>
                <el-table-column align="center" prop="teleDirectorName" label="电销总监"></el-table-column>
                <el-table-column align="center" prop="teleSaleName" label="电销顾问"></el-table-column>
                <el-table-column align="center" prop="teleGorupName" label="电销组"></el-table-column>
                <el-table-column align="center" prop="teleProject" label="电销组负责项目"></el-table-column>
                <el-table-column align="center" prop="createUserRoleName" label="资源创建人角色"></el-table-column>
                <el-table-column align="center" prop="createUserName" label="资源创建人"></el-table-column>
            </el-table>
        </div>
        <div v-show="showPhoneTable4">
            <span>手机号{{phone4}}重复手机号资源</span>
            <el-table ref="singleTable4" tooltip-effect="dark" style="width: 100%" border :data="repeatPhonesTable4">
                <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
                <el-table-column align="center" prop="createTime" label="资源创建时间"></el-table-column>
                <el-table-column align="center" prop="phoneChangeTime" label="联系方式创建时间"></el-table-column>
                <el-table-column align="center" prop="teleDirectorName" label="电销总监"></el-table-column>
                <el-table-column align="center" prop="teleSaleName" label="电销顾问"></el-table-column>
                <el-table-column align="center" prop="teleGorupName" label="电销组"></el-table-column>
                <el-table-column align="center" prop="teleProject" label="电销组负责项目"></el-table-column>
                <el-table-column align="center" prop="createUserRoleName" label="资源创建人角色"></el-table-column>
                <el-table-column align="center" prop="createUserName" label="资源创建人"></el-table-column>
            </el-table>
        </div>
        <div v-show="showPhoneTable5">
            <span>手机号{{phone5}}重复手机号资源</span>
            <el-table ref="singleTable5" tooltip-effect="dark" style="width: 100%" border :data="repeatPhonesTable5">
                <el-table-column align="center" type="index" width="55" label="序号"></el-table-column>
                <el-table-column align="center" prop="createTime" label="资源创建时间"></el-table-column>
                <el-table-column align="center" prop="phoneChangeTime" label="联系方式创建时间"></el-table-column>
                <el-table-column align="center" prop="teleDirectorName" label="电销总监"></el-table-column>
                <el-table-column align="center" prop="teleSaleName" label="电销顾问"></el-table-column>
                <el-table-column align="center" prop="teleGorupName" label="电销组"></el-table-column>
                <el-table-column align="center" prop="teleProject" label="电销组负责项目"></el-table-column>
                <el-table-column align="center" prop="createUserRoleName" label="资源创建人角色"></el-table-column>
                <el-table-column align="center" prop="createUserName" label="资源创建人"></el-table-column>
            </el-table>
        </div>
    </el-dialog>

    <!-- 分配资源 -->
    <el-dialog  title="分配资源"  :visible.sync="allocationVisible">
        <template>
            <el-form :model="allocationForm" ref="allocationForm" :rules="allocationFormRules">
                <el-form-item label="电销顾问" :label-width="formLabelWidth"  prop="saleId">
                    <el-select v-model="allocationForm.saleId" placeholder="组内电销顾问" style="width: 80%">
                        <el-option v-for="item in saleOptions" 
                            :key="item.id" 
                            :label="item.name" 
                            :value="item.id">
                        </el-option>
                    </el-select>
                </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer">
                <el-button type="primary" @click="allocationClue('allocationForm')" :disabled="btnDisabled">提 交</el-button>
                <el-button  @click="allocationVisible = false">取 消</el-button>
            </div>
        </template>
    </el-dialog>
</div>
<!-- import common js-->
<div th:include="_footer_include :: #jsLib"></div>
<script th:inline="javascript">
    var saleList=[[${saleList}]];//电销顾问
    var clueCategoryList=[[${clueCategoryList}]];//资源类别
    var clueTypeList=[[${clueTypeList}]];//资源类型
    var dashboardTeleGroup = [[${dashboardTeleGroup}]]
</script>
<script th:src="@{/js/custom/console/consoleTelMajordomo.js?v=1.0.0}"></script>
</body>
</html>